# 리눅스 명령어

### top
> 현재 OS의 상태(메모리, cpu 사용량)를 나타내주는 CLI 어플리케이션
> top 명령어를 실행하는 동안 interval 간격으로 실시간에 근접한 내용 출력
![image](https://github.com/seaweed2/opensw_prac2/assets/95917813/0967b570-2081-4478-87c5-9fe9760f6926)



- 요약 영역
1. ﻿전체 프로세스가 OS에 대해 어느정도의 리소스를 차지하고 있는지 나타냄
2. 대표적으로 시간, 유저, 로드 에버리지, 테스크, CPU, 메모리 등이 있음

![image](https://github.com/seaweed2/opensw_prac2/assets/95917813/f6e0c342-9968-47b4-ad86-509c445f4ebe)



* 실행 전 옵션
  1. -b : 배치 모드 옵션
  2. -n : top 실행 주기 설정
  3. -p : Process ID
* 실행 후 옵션
   1. 1 : ﻿CPU 코어별 사용 현황
   2. m : 메모리 사용률 시각화 표시
   3. shift + p :	CPU 사용률이 높은 프로세스를 기준으로 나열
   4. shift + m :	메모리 사용률이 높은 프로세스를 기준으로 나열
   5. shift + t :	수행 시간이 긴 프로세스를 기준으로 나열
   6. shift + b :	상단의 uptime 및 기타 정보값을 블락 선택하여 표시
   7. k	-kill : 할 프로세스 PID를 입력할 수 있음. (- Signal을 입력하라 표시되면 9 입력)
   8. H : 상단의 Tasks 기준을 쓰래드로 변경
   9. u	: 모니터링할 user를 선택하여 해당 권한 프로세스 감시
   10. c :	명령 인자 표시 / 비표시
   11. l(소문자) :	uptime line(첫번째 행)을 표시 / 비표시 space bar	갱신
   12. u :	입력한 유저 소유의 Process만 표시
   13. -which user : 와 같이 유저를 입력하라 표시될 때 User 입력
   14. -blank(공백) : 입력 시 모두 표시
   15. f :	화면에 표시될 프로세스 관련 항목 설정
   16. i :	idle 또는 좀비 상태의 프로세스는 표시되지 않음
   17. z :	출력 색상 변경
   18. d [sec] : 설정된 초 단위로 갱신
   19. q :	명령어 종료



* ﻿시스템 현재 시간, OS가 살아있는 시간(uptime), 유저의 세션 수
  1. 시간은 GMT 기준 표시
  2. uptime : days와 시간으로 표시
  3. 유저 세션 수는 간략하게 표시되므로 자세한 사항은 who 명령어를 사용할 것


 
* 로드 애버리지(Load Average)
  1. CPU Load(CPU의 작업량)의 이동 평균 표시
  2. 실행되거나 대기중인 프로세스의 평균
  3. 싱글 코어 : 1.0의 값은 CPU를 100% 사용하고 있다는 의미
  4. 멀티 코어 : 해당 코어수만큼 * N을 한 값이 CPU 100%를 사용한다는 의미
  5. 100%가 넘어간다면 CPU에서 처리하지 못하고 대기중인 프로세스 존재


 
* Tasks(현재 프로세스들의 상태)

1. Total :	전체 프로세스
2. running :	실행 상태인 프로세스
3. sleeping :	대기 상태인 프로세스
4. stopped :	종료된 프로세스
5. zombies :	좀비상태인 프로세스

※ zombies : 종료된 프로세스의 부모 프로세스가 해당 종료 정보를 확인하지 않거나 처리하지 않은 경우, 시스템 프로세스 테이블에 남아 시스템의 자원을 소비하고 있는 상태.



* 출력 항목
1. PID :	각 프로세스의 고유한 식별번호로, 해당 프로세스를 식별하는 데 사용
2. USER :	프로세스를 실행한 사용자 계정
3. PRI :	프로세스 실행 우선순위. 값이 낮을수록 더 높은 우선순위를 가진다.
4. NI :	사용자에 의해 변경된 프로세스의 우선 순위를 나타냄
5. VIRT : 프로세스가 사용하는 가상 메모리의 크기를 KB 단위로 표시
6. RES : 프로세스가 실제로 점유하고 있는 물리적 메모리의 크기를 KB 단위로 표시
7. SHR : 다른 프로세스와 공유하고 있는 메모리의 크기를 KB 단위로 표시
8. S :	프로세스 현재 상태. (R : 실행, S : 슬립, W : 지연대기,Z : 좀비)
9. % CPU :	프로세스의 CPU 사용률
10. % MEM :	프로세스의 메모리 사용률
11. TIME+ :	프로세스의 누적 CPU 사용 시간
12. COMMAND :	프로세스를 실행한 명령어 또는 프로그램

* ps와의 차이점
ps : ps한 지점에 proc에서 검색한 cpu 사용량

top : proc에서 일정 주기로 합산해 cpu 사용율 출력

---
### ps
> 현재 실행중인 프로세스와 상태를 출력하는 명령어
![image](https://github.com/seaweed2/opensw_prac2/assets/95917813/32b88042-572f-42f1-90a6-cdf1e2cac268)

* 명령어 옵션
  1. ﻿-A	: 모든 프로세스 출력
  2. a(BSD) :	터미널과 연관된 프로세스 출력, x 옵션과 같이 사용하여 모든 프로세스를 출력할 때 사용
  3. -a :	세션 리더를 제외하고 데몬 프로세스처럼 터미널에 종속되지 않은 모든 프로세스 출력
  4. -e :	커널 프로세스를 제외한 모든 프로세스 출력
  5. -f :	출력을 풀 포맷으로 표기 (유닉스 스타일). UID, PID, PPID 등 함께 표시
  6. -l (System V) / l(BSD) :	출력을 긴 포맷으로 표기. 프로세스의 정보를 길게 보여주는 옵션으로 우선순위와 관련된 PRI값과 NI값을 확인
  7. -o :	출력 포맷 지정
  8. -M :	64비트 프로세스들을 출력
  9. -m :	프로세스뿐만 아니라 커널 스레드도 출력
  10. -p :	특정 PID를 지정하여 출력
  11. -r :	현재 실행 중인 프로세스 출력
  12. u (BSD) :	프로세스의 소유자를 기준으로 출력
  13. -u [사용자] :	특정 사용자의 프로세스 정보를 출력, 사용자를 지정하지 않는다면 현재 사용자 기준으로 출력
  14. x (BSD) :	데몬 프로세스처럼 터미널에 종속되지 않은 프로세스를 출력
  15. -x :	로그인 상태에 있는 동안 아직 완료되지 않은 프로세스 출력

* 출력 항목
1. PID :	각 프로세스의 고유한 식별번호
2. USER :	프로세스를 실행한 사용자 계정
3. PPID :	부모 프로세스의 PID
4. % CPU :	CPU 사용 추정치 (BSD)
5. % MEM :	메모리 사용 추정치 (BSD)
6. VSZ : K 단위 또는 페이지 단위의 가상 메모리 사용량
7. RSS :	실제 메모리 사용량
8. TTY :	프로세스와 연결된 터미널
9. S(System V)/STAT (BSD) :	현재 프로세스의 상태 코드

R : 실행중이거나 실행될 수 있는 상태

S : 대기(약 20초이상)

I : 대기(약 20초이하)

T : 작업 제어에 의해 정지된 상태

D : 디스크 관련 대기 상태

P : 페이지 관련 대기 상태

X : 메모리 확보를 위한 대기 상태

> : 인위적으로 우선 순위가 높아진 상태

Z : 좀비 프로세스


10. TIME :	총 CPU 사용 시간

11. COMMAND :	프로세스를 실행한 명령어 또는 프로그램

12. STIME :	프로세스가 시작된 시간 혹은 날짜

13. C (System V) / CP (BSD) :	짧은 기간 동안의 CPU 사용률

14. F	: 플래그

4 : used super-user privileges

1 : forked but didn’t exec

5 : 4 & 1 플래그에 모두 해당하는 경우

0 : 어떤 플래그에도 해당하지 않는 경우

15. PRI :	실제 실행 우선순위

16. NI :	nice 우선순위 번호

---
### jobs
> 실행중인 프로세스 목록 확인
![image](https://github.com/seaweed2/opensw_prac2/assets/95917813/caf3dc26-4d77-4b50-9e58-d476c316616e)

* 명령어 옵션
  1. -l :	프로세스 ID와 함께 잡 목록 출력
  2. -n :	마지막 알림 이후 변경된 잡만 출력
  3. -p :	잡의 프로세스 ID만 출력
  4. -r :	실행중인 잡만 출력
  5. -s :	중지된 잡만 출력


* 출력 항목(PID, Status, 명령어)
1. Running    |	작업 진행중
2. Done       |	작업이 완료되어 0 반환
3. Done(code) |	작업이 종료되었으며 0이 아닌 코드를 반환
4. Stopped    |	작업 일시 중단
5. Stopped(SIGTSTP)	SIGTSTP | 시그널이 작업을 일시 중단
6. Stopped(SIGSTOP)	SIGSTOP | 시그널이 작업을 일시 중단
7. Stopped(SIGTTIN)	SIGTTIN | 시그널이 작업을 일시 중단
8. Stopped(SIGTTOU)	SIGTTOU | 시그널이 작업을 일시 중단



***
### kill
> 프로세스 종료
![image](https://github.com/seaweed2/opensw_prac2/assets/95917813/2fab93a9-ba22-4826-bfc8-946937c1cbee)


* 명령어 옵션
 1. -s <signal> :	특정 시그널을 사용하여 프로세스 종료(기본적으로 SIGTERM 시그널 사용)
 2. -l :	지원되는 시그널 목록 출력
 3. -a :	현재 사용자에 속한 모든 프로세스 종료
 4. -q :	프로세스에 시그널을 보내는 대신 시그널을 대기열에 출력
 5. -9 <pid> :	SIGKILL 시그널을 사용하여 프로세스 강제 종료
 6. killall <프로세스명> :	특정 프로세스 이름을 가진 모든 프로세스 종료

* SIGNAL
![image](https://github.com/seaweed2/opensw_prac2/assets/95917813/f4923995-daea-4d4e-8365-f2b8a0c80f12)

  
1  |	SIGHUP  |	hangup, 로그아웃 등 접속을 끊을 때 발생하는 신호. 특정 실행 중인 프로그램이 사용하는 설정 파일을 변경시키고 변화된 내용을 적용할 때 사용

2  |	SIGINT  |	현재 동작하는 프로그램을 일시중지, <ctrl>+c

9  |	SIGKILL |	프로그램 강제 종료

11 |	SIGSEGV |	잘못된 메모리 관리시 생기는 신호

15 |	SIGTERM |	정상적인 종료 기본으로 이 시그널을 사용한다

18 |	SIGCONT |	중지되어 있는 프로그램을 재실행

19 |	SIGSTOP |	프로그램 중지

20 |	SIGTSTP |	터미널에서 중지되어 있는 신호

***
